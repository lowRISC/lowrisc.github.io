<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><base href=https://www.lowrisc.org><link rel=icon type=image/png sizes=32x32 href=/favicon.png><title>lowRISC Ethernet internals &middot; lowRISC: Collaborative open silicon engineering</title><link href=/main.e5638.css rel=stylesheet><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-53520714-1','auto');ga('send','pageview');</script></head><body><header><nav class="navbar navbar-expand-md navbar-light"><div class=container><a class=navbar-brand href=#><img src=/img/logo/logo-dualcolor.svg alt=lowRISC></a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarCollapse aria-controls=navbarCollapse aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarCollapse><ul class="navbar-nav ml-auto"><li class=nav-item><a href=/our-work class=nav-link>Our work</a></li><li class=nav-item><a href=/open-silicon class=nav-link>Open Silicon</a></li><li class=nav-item><a href=/community class=nav-link>Community</a></li><li class=nav-item><a href=/blog class=nav-link>Blog</a></li><li class=nav-item><a href=/jobs class=nav-link>Jobs</a></li><li class=nav-item><a href=/about class=nav-link>About us</a></li><li class=nav-item><a class="btn lr-navbar-btn-gh" href=https://github.com/lowrisc>GitHub</a></li></ul></div></div></nav></header><main role=main><div class=container><h1>lowRISC Ethernet internals</h1><p>This lowRISC release introduces 100Mbps Ethernet, allowing remote ssh and
network filing system functionality.</p><h2 id=rtl-changes:9de3da8ba238018969aebf4a4f15de58>RTL changes</h2><p>The PHY of the Ethernet uses reduced media independent interface (RMII). The transmission rate is fixed at 100MHz
and is found to be compatible with most hubs and switches. The possibility to communicate with the PHY is programmed
but not used.</p><p>The core of the Ethernet block is adapted from a suite of IP provided by Alex Forencich.</p><p><a href=https://github.com/alexforencich/verilog-ethernet.git>https://github.com/alexforencich/verilog-ethernet.git</a></p><p>It requires a wrapper and some buffer RAMs to enable it to be controlled by the Rocket, plus an interrupt interface.
This interface always operates in promiscuous mode, meaning all valid packets received by the media access controller (MAC)
are passed to the kernel to decide what shall be done with them.</p><p>The regular routines are setting and retrieving the MAC address of the device are present, but they make no difference to
operation in this version/</p><h2 id=linux-driver:9de3da8ba238018969aebf4a4f15de58>Linux driver</h2><p>A conventional model is followed with no DMA. It is assumed that the transmit will be so fast that the transmit buffer will
never be full. Conversely multiple packets could be received before being noticed by the processor and for this purpose the
received is adapted to receive up to 8 full-sized packets in quick succession. THis driver is interrupt driven in the usual way.</p><h2 id=user-land-operation:9de3da8ba238018969aebf4a4f15de58>User land operation</h2><p>A complete suite of Linux user commands is available via the Poky Linux districution for RISCV. Only a few small changes are needed
to adapt the distribution to the changed device names.</p><h2 id=dhcp:9de3da8ba238018969aebf4a4f15de58>DHCP</h2><p>Dynamic host configuration protocol is supported for standalone computer use. It cannot be used if remote booting or NFS is required.
A time protocol server is also preferable but not a showstopper.</p><h2 id=remote-booting:9de3da8ba238018969aebf4a4f15de58>Remote booting</h2><p>This release adds a protocol for booting Linux or bare metal programs over Ethernet. Hence it is possible to operate without SD-cards
or serial access to the device. In the latter case it highly desirable to have a VGA monitor and USB keyboard, and separate power provision
needs to be provided.</p></div></main><footer class=lr-footer><div class=container><div class=row><div class="col-lg-2 d-none d-lg-block"><img src=/img/logo/logo-dualcolor.svg width=150px></div><div class=col><p>The text content on this website is licensed under a <a href=https://creativecommons.org/licenses/by/4.0/>Creative Commons Attribution 4.0 International License</a>, except where otherwise noted. No license is granted for logos or other trademarks. Other content &copy; lowRISC Contributors.</p><a href=/privacy-policy>Privacy and cookies policy</a>
&middot; <a href=/usage-licence>Usage licence</a></p></div><div class=col-lg-2><p><a href=#>Back to top</a></p></div></div></div></footer><script src=/main.e5638.js></script></body></html>