<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><base href=https://www.lowrisc.org><link rel=icon type=image/png sizes=32x32 href=/favicon.png><title>Rocket chip overview &middot; lowRISC: Collaborative open silicon engineering</title><link href=/main.b7e96.css rel=stylesheet><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53520714-1','auto');ga('send','pageview');}</script></head><body><header><nav class="navbar navbar-expand-md navbar-light"><div class=container><a class=navbar-brand href=#><img src=/img/logo/logo-dualcolor.svg alt=lowRISC></a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarCollapse aria-controls=navbarCollapse aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarCollapse><ul class="navbar-nav ml-auto"><li class=nav-item><a href=/our-work class=nav-link>Our work</a></li><li class=nav-item><a href=/open-silicon class=nav-link>Open Silicon</a></li><li class=nav-item><a href=/community class=nav-link>Community</a></li><li class=nav-item><a href=/blog class=nav-link>Blog</a></li><li class=nav-item><a href=/jobs class=nav-link>Jobs</a></li><li class=nav-item><a href=/about class=nav-link>About us</a></li><li class=nav-item><a class="btn lr-navbar-btn-gh" href=https://github.com/lowrisc>GitHub</a></li></ul></div></div></nav></header><main role=main><div class=container><h1>Rocket chip overview</h1><p>An overview of Berkeley&rsquo;s RISC-V &ldquo;Rocket Chip&rdquo; SoC Generator can be found <a href=https://1nv67s1krw3279i5yp7fko14-wpengine.netdna-ssl.com/wp-content/uploads/2015/01/riscv-rocket-chip-generator-workshop-jan2015.pdf>here</a>.</p><p>A high-level view of the rocket chip is shown below. The design
contains multiple Rocket tiles consisting of a Rocket core and L1
instruction and data caches. Our tagged memory implementation inserts
a tag cache before the main memory interface. Our tagged memory additions
are described in detail <a href=https://www.lowrisc.org/docs/tagged-memory-v0.1/tags/>here</a>.</p><p><img src=../figures/rocket_chip.png alt=Drawing style=width:650px></p><p>The host-target interface (HTIF) provides a FIFO interface between the
ARM PS and RISC-V systems. Two communication registers (<code>fromhost</code>,
<code>tohost</code>) are provided in CSR space (Control and Status Registers) for
this purpose. The HTIF allows the host to load binaries, access memory
and CSRs and service syscalls for peripheral device emulation.</p><p>Coherence between the private L1 caches is maintained with the
assistance of the &ldquo;coherence managers&rdquo;. Requests are interleaved
across a number of coherence managers at the granularity of cache
lines. Each coherence manager contains a number of transaction &ldquo;trackers&rdquo;
and can manage numerous outstanding transactions (or cache misses).
A MI, MSI or MESI coherence protocol may be selected.</p><p>Communication between the Rocket tiles and coherence managers uses the
<a href=https://github.com/ucb-bar/uncore/blob/master/doc/TileLink0.3.1Specification.pdf>TileLink protocol</a>. The protocol defines a number of
independent transaction channels, the prioritization of channels (to
avoid deadlock) and their format. TileLink helps to isolate the
design of the coherence protcol from that of the physical networks
and cache controlllers.</p><h3 id=default-configuration-parameters:7008e9d8db3f5610dc60f128bccc196f>Default configuration parameters</h3><p>The default configuration parameters are listed in the table
below. All configuration parameters are located in
<code>src/scala/main/PublicConfigs.scala</code>.</p><p>Further details on how to parameterize Rocket Chip can be found
<a href=https://github.com/ucb-bar/rocket-chip#-how-can-i-parameterize-my-rocket-chip>here</a>.
A manual describing the advanced
parameter library within Chisel is also
<a href=https://github.com/ucb-bar/chisel/blob/master/doc/parameters/parameters.pdf>available</a>.</p><table><thead><tr><th>Description</th><th>Parameter Name</th><th>Default Value</th><th>Possible Value</th><th>Notes</th></tr></thead><tbody><tr><td>No. of Rocket tiles</td><td>NTILES</td><td>1</td><td>&gt;0</td><td></td></tr><tr><td>No. of banks</td><td>NBANKS</td><td>1</td><td>&gt;0, power of 2</td><td></td></tr><tr><td>No. of MSHRS</td><td>L1D_MSHRS</td><td>2</td><td>&gt;0</td><td></td></tr><tr><td>No. of sets in L1D</td><td>L1D_SETS</td><td>128</td><td>&gt;0, power of 2</td><td></td></tr><tr><td>No. of ways in L1D</td><td>L1D_WAYS</td><td>4</td><td>&gt;0, power of 2</td><td></td></tr><tr><td>No. of sets in L1I</td><td>L1I_SETS</td><td>128</td><td>&gt;0, power of 2</td><td></td></tr><tr><td>No. of ways in L1I</td><td>L1I_WAYS</td><td>2</td><td>&gt;0, power of 2</td><td></td></tr><tr><td>Size of data TLB</td><td>NDTLBEntries</td><td>8</td><td>&gt;0, power of 2</td><td></td></tr><tr><td>Size of instr TLB</td><td>NITLBEntries</td><td>8</td><td>&gt;0, power of 2</td><td></td></tr><tr><td>Size of BTB</td><td>NBTBEntries</td><td>62</td><td>&gt;0</td><td></td></tr><tr><td>No. of trackers in coherence manager</td><td>L2_ACQ_XACTS</td><td>7</td><td>&gt;0</td><td></td></tr><tr><td>Instantiate FPU?</td><td>BuildFPU</td><td>Some(() =&gt; Module(new FPU))</td><td></td><td>Set to None to disable</td></tr><tr><td>Coherence protocol</td><td>Coherence</td><td>new MSICoherence()=&gt;new(NullRepresentation)</td><td>MI, MEI, MSI, MESI</td><td></td></tr></tbody></table></div></main><footer class=lr-footer><div class=container><div class=row><div class="col-lg-2 d-none d-lg-block"><img src=/img/logo/logo-dualcolor.svg width=150px></div><div class=col><p><small>The text content on this website is licensed under a <a href=https://creativecommons.org/licenses/by/4.0/>Creative Commons Attribution 4.0 International License</a>, except where otherwise noted. No license is granted for logos or other trademarks. Other content &copy; lowRISC Contributors.</small></p><p><small><a href=/privacy-policy>Privacy and cookies policy</a>
&middot; <a href=/usage-licence>Usage licence</a></small></p></div><div class=col-lg-2><p><a href=#>Back to top</a></p></div></div></div></footer><script src=/main.b7e96.js></script></body></html>